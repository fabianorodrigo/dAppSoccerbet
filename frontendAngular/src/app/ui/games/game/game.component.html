<div class="game">
  <div class="row-teams">
    <label>{{ homeTeam }}</label>
    <label>X</label>
    <label>{{ visitorTeam }}</label>
  </div>
  <div class="row-teams" *ngIf="finalized">
    <label class="label-score">{{ finalScore?.home }}</label>
    <label class="label-score">{{ finalScore?.visitor }}</label>
  </div>
  <div class="row">
    <mat-icon>today</mat-icon>
    <span>{{ datetimeGame?.toLocaleDateString() }}</span>
    <mat-icon>schedule</mat-icon>
    <span>{{ datetimeGame?.toLocaleTimeString() }}</span>
    <span class="spanSpace"></span>
    <mat-icon *ngIf="formatedRemainingAllowance && this.userAccountAddress"
      >sell</mat-icon
    >
    <span *ngIf="formatedRemainingAllowance && this.userAccountAddress">{{
      formatedRemainingAllowance
    }}</span>
  </div>
  <!-- ADMIN ROW ACTION -->
  <div class="row-action" *ngIf="!finalized && isAdmin">
    <button
      class="button"
      *ngIf="!open"
      mat-flat-button
      [disabled]="!this.userAccountAddress"
      color="primary"
      matTooltip="The game is not receiving bets. Click to open it for betting"
      (click)="openForBetting()"
    >
      Open for betting
    </button>
    <button
      class="button"
      *ngIf="open"
      mat-flat-button
      [disabled]="!this.userAccountAddress"
      color="accent"
      matTooltip="The game is open for betting. Click to close it"
      (click)="closeForBetting()"
    >
      Close for betting
    </button>
    <button
      class="button"
      [disabled]="open || !this.userAccountAddress"
      mat-flat-button
      color="warn"
      (click)="finalizeGame()"
    >
      Finalize ...
    </button>
  </div>
  <!-- USER ROW ACTION -->
  <div class="row-action" *ngIf="!finalized">
    <button
      mat-stroked-button
      color="primary"
      [matMenuTriggerFor]="menu"
      matTooltip="Info about this game"
    >
      <mat-icon>info</mat-icon> Info
    </button>
    <mat-menu #menu="matMenu">
      <button
        mat-menu-item
        (click)="formatedRemainingAllowance ? hideAllowance() : showAllowance()"
        [disabled]="!this.userAccountAddress"
      >
        {{
          formatedRemainingAllowance && this.userAccountAddress
            ? "Hide"
            : "Show"
        }}
        remaining BetTokens approved
      </button>
      <button mat-menu-item (click)="listBets()">Show bettings ...</button>
    </mat-menu>
    <button
      mat-flat-button
      [disabled]="!this.userAccountAddress"
      color="accent"
      matTooltip="Approve a maximum ammount of BetTokens to be spent on bettings on this Game"
      (click)="approve($event)"
    >
      Approve BetTokens ...
    </button>
    <button
      mat-flat-button
      [disabled]="!this.userAccountAddress || !open"
      color="primary"
      matTooltip="Click to place your bet"
      (click)="bet()"
    >
      Bet ...
    </button>
  </div>
</div>
